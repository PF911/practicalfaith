<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Practical Faith</title>

<style>
html, body {
  height: 100%;
  margin: 0;
}

body {
  display: flex;
  flex-direction: column;
  background: linear-gradient(to bottom,#ffeb3b,#ffd54f,#ffb74d,#f59b23);
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
}

#content {
  flex: 1;
  overflow-y: auto;
  background: #f5f5f5;
}

nav {
  display: flex;
  justify-content: space-around;
  align-items: center;
  padding: 8px 6px env(safe-area-inset-bottom);
  background: #ffffff;
  border-top: 1px solid rgba(0,0,0,0.15);
}

nav button {
  flex: 1;
  background: none;
  border: none;
  text-align: center;
  font-size: 0.75rem;
  color: #333;
  padding: 6px 0;
  cursor: pointer;
}

nav img {
  display: block;
  margin: 0 auto 2px;
}

nav button:active {
  opacity: 0.7;
}
</style>
</head>

<body>

<div id="content"></div>

<nav>
  <button onclick="loadPage('sermons.html')">
    <img src="images/YouTube.png" width="35" height="35">Sermons
  </button>

  <button onclick="loadPage('spotify.html')">
    <img src="images/stotify.png" width="35" height="35">Spotify
  </button>

  <button onclick="loadPage('home.html')">
    <img src="images/Logo.png" width="35" height="35">Home
  </button>

  <button onclick="loadPage('books.html')">
    <img src="images/books.png" width="35" height="35">Books
  </button>

  <button onclick="loadPage('share.html')">
    <img src="images/share.png" width="35" height="35">Share
  </button>
</nav>

<script src="capacitor.js"></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  if (window.Capacitor?.Plugins?.SplashScreen) {
    setTimeout(() => {
      window.Capacitor.Plugins.SplashScreen.hide();
    }, 400);
  }
  
  // Load home page by default
  loadPage('home.html');
});

async function loadPage(page) {
  try {
    const response = await fetch(page);
    const html = await response.text();
    
    // Extract body content
    const parser = new DOMParser();
    const doc = parser.parseFromString(html, 'text/html');
    const bodyContent = doc.body.innerHTML;
    
    document.getElementById("content").innerHTML = bodyContent;
    
    // Re-execute scripts from loaded page
    const scripts = doc.querySelectorAll('script');
    scripts.forEach(oldScript => {
      const newScript = document.createElement('script');
      Array.from(oldScript.attributes).forEach(attr => {
        newScript.setAttribute(attr.name, attr.value);
      });
      newScript.textContent = oldScript.textContent;
      document.body.appendChild(newScript);
    });
  } catch (e) {
    console.error('Error loading page:', e);
    document.getElementById("content").innerHTML = 
      '<div style="padding:20px;text-align:center;color:#666;">Error loading page</div>';
  }
}
</script>

</body>
</html>